import{a as A}from"./chunk-XQ35IDWN.js";import{a as j}from"./chunk-5JNKINIZ.js";import{a as z}from"./chunk-VLPMJNZY.js";import{e as E,g as T}from"./chunk-WXEOJOXS.js";import{i as k,m as F,n as V}from"./chunk-YHNLNYZ5.js";import{$a as f,Bb as S,Cb as w,Ea as b,Kb as I,Z as C,Za as p,_ as P,_a as h,ab as g,bb as i,cb as r,d as O,db as u,hb as M,lb as x,mb as v,sa as m,ta as o,tb as c,ub as d,ya as l,zb as y}from"./chunk-T7VB2PCG.js";var $=a=>({active:a});function D(a,n){if(a&1){let e=M();i(0,"div",5)(1,"img",22),x("click",function(){let s=C(e).$index,_=v();return P(_.selectImage(s))}),r()()}if(a&2){let e=n.$implicit,t=v();o(),g("src",e,m)("alt",t.currentProduct==null?null:t.currentProduct.name)}}function B(a,n){if(a&1&&(i(0,"div",11)(1,"p"),c(2),r(),i(3,"div",23),u(4,"img",24),r()()),a&2){let e=n.$implicit;o(2),d(e.text),o(2),g("src",e.image,m)("alt",e.text)}}function U(a,n){if(a&1&&(i(0,"p"),c(1),r()),a&2){let e=n.$implicit;o(),d(e.text)}}function G(a,n){if(a&1){let e=M();i(0,"div",25),x("click",function(){let s=C(e).$index,_=v();return P(_.variantChange(s))}),u(1,"img",24),r()}if(a&2){let e=n.$implicit,t=n.$index,s=v();g("ngClass",y(3,$,s.currentVariant===t)),o(),g("src",e.color==null?null:e.color.image,m)("alt",e.color==null?null:e.color.name)}}var R=class a{constructor(n,e,t,s,_,N){this.route=n;this.http=e;this.cdr=t;this.userService=s;this.cartService=_;this.router=N}currentProduct;prodId;queryParamsSubscription;images=[];finishes=[];prodFinishes=[];currentVariant=0;selectedImage=0;user;ngOnInit(){this.queryParamsSubscription=this.route.paramMap.subscribe(()=>this.chargeValues())}chargeValues(){let n=this.route.snapshot.paramMap.get("id");this.prodId=n||void 0,n&&this.http.getProductById(n).subscribe({next:e=>{this.currentProduct=e,this.images=this.currentProduct.variants[this.currentVariant].images.map(t=>t.link),this.loadFinishes(),this.cdr.detectChanges()},error:e=>{console.log(e)}}),this.userService.currentUser$.subscribe({next:e=>this.user=e,error:e=>console.log(e)})}loadFinishes(){this.http.getFinishes().subscribe({next:n=>{this.finishes=n,this.prodFinishes=this.finishes.filter(e=>this.currentProduct.finish.filter(t=>t.finishId===e.id).length>0)??[]},error:n=>console.log(n)})}variantChange(n){this.currentVariant=n,this.images=this.currentProduct?.variants[this.currentVariant].images.map(e=>e.link)??[],this.selectedImage=0,this.cdr.detectChanges()}selectImage(n){this.selectedImage=n,this.cdr.detectChanges()}addToCart(){return O(this,null,function*(){this.currentProduct&&this.userService.isLogged()&&this.cartService.addToCart(this.user.id,this.currentProduct.variants[this.currentVariant].id).subscribe({next:n=>{console.log(n),this.cartService.currentProducts.update(e=>[...e,this.currentProduct.variants[this.currentVariant]]),this.cartService.loadCartFromBackend(this.user.id),this.cdr.detectChanges()},error:n=>console.log(n)})})}toOwn(){this.currentProduct&&this.userService.isLogged()&&this.cartService.addToCart(this.user.id,this.currentProduct.variants[this.currentVariant].id).subscribe({next:n=>{console.log(n),this.cartService.currentProducts.update(e=>[...e,this.currentProduct.variants[this.currentVariant]]),this.cartService.loadCartFromBackend(this.user.id),this.cdr.detectChanges(),this.router.navigate(["/dashboard/cart"],{queryParams:{markedId:this.currentProduct?.variants[this.currentVariant].id}})},error:n=>console.log(n)})}static \u0275fac=function(e){return new(e||a)(l(E),l(z),l(I),l(j),l(A),l(T))};static \u0275cmp=b({type:a,selectors:[["app-singular"]],decls:44,vars:8,consts:[[1,"detail-container"],[1,"img-container"],[1,"main-image"],[1,"main-img",3,"src","alt"],[1,"sec-img-container"],[1,"sec-images"],[1,"detail-content"],[1,"details"],[1,"features"],[1,"finishing-electric"],[1,"finishing"],[1,"finish-details"],[1,"electric"],[1,"variants"],[1,"variant-list"],[1,"color-container",3,"ngClass"],[1,"button-bar"],[1,"divider"],[1,"btn-section"],[1,"button-base",2,"flex","1",3,"click"],[1,"button-chips",2,"padding","14px",3,"click"],["src","/assets/shopping-bag.svg"],[3,"click","src","alt"],[1,"finis-image"],[3,"src","alt"],[1,"color-container",3,"click","ngClass"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),u(3,"img",3),r(),i(4,"div",4),h(5,D,2,2,"div",5,p),r()(),i(7,"div",6)(8,"div",7)(9,"h2"),c(10),r(),i(11,"h4"),c(12),r(),i(13,"p"),c(14),r(),i(15,"div",8)(16,"div",9)(17,"div",10)(18,"h3"),c(19,"Terminaciones"),r(),h(20,B,5,3,"div",11,p),r(),i(22,"div",12)(23,"h3"),c(24,"Sistema el\xE9ctrico"),r(),h(25,U,2,1,"p",null,p),r()(),i(27,"div",13)(28,"h3"),c(29,"Colores"),r(),i(30,"div",14),h(31,G,2,5,"div",15,p),r()()()(),i(33,"div",16),u(34,"div",17),i(35,"p"),c(36),S(37,"currency"),r(),i(38,"div",18)(39,"button",19),x("click",function(){return t.toOwn()}),i(40,"label"),c(41,"ADQUIRIR"),r()(),i(42,"button",20),x("click",function(){return t.addToCart()}),u(43,"img",21),r()()()()()),e&2&&(o(3),g("src",t.images[t.selectedImage],m)("alt",t.currentProduct==null?null:t.currentProduct.name),o(2),f(t.images),o(5),d(t.currentProduct==null?null:t.currentProduct.name),o(2),d(t.currentProduct==null?null:t.currentProduct.subtitle),o(2),d(t.currentProduct==null?null:t.currentProduct.description),o(6),f(t.prodFinishes),o(5),f(t.currentProduct==null?null:t.currentProduct.details),o(6),f(t.currentProduct==null?null:t.currentProduct.variants),o(5),d(w(37,6,t.currentProduct.variants.length>0?t.currentProduct.variants[t.currentVariant].price:0)))},dependencies:[V,k,F],styles:['h2[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font, "Montserrat");font-size:48px;font-style:normal;font-weight:600;line-height:60px;margin:0;letter-spacing:-.96px}h4[_ngcontent-%COMP%]{color:var(--Brand-600, #178C94);font-family:var(--montser-font, "Montserrat");font-size:16px;font-style:normal;font-weight:600;line-height:24px;margin:0}p[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font, "Montserrat");font-size:20px;font-style:normal;font-weight:400;line-height:30px;margin-top:40px;margin-bottom:48px}.detail-container[_ngcontent-%COMP%]{display:flex;gap:40px}.img-container[_ngcontent-%COMP%]{display:flex;width:644px;flex-direction:column;align-items:flex-start;gap:19.346px;overflow:hidden}.detail-content[_ngcontent-%COMP%]{display:flex;flex:1;min-width:472px;flex-direction:column;padding-inline:48px;padding-block:64px;box-sizing:border-box;border-radius:var(--Corner-Small, 8px);background:var(--Gray-50, #FAFAFA)}.details[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;align-self:stretch}.details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{width:100%;text-align:left}.button-bar[_ngcontent-%COMP%]{position:relative;display:flex;padding-top:24px;height:87px;box-sizing:border-box;justify-content:space-between;align-items:center}.button-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:30px;font-style:normal;font-weight:600;line-height:38px;margin:0;flex:1}.divider[_ngcontent-%COMP%]{position:absolute;top:0;height:1px;background:var(--Gray-300, #D5D7DA);width:100%}.btn-section[_ngcontent-%COMP%]{display:flex;gap:12px;width:250px;height:48px}.main-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:3.869px;overflow:hidden}.main-img[_ngcontent-%COMP%]{width:100%;min-width:100%;min-height:100%}.sec-img-container[_ngcontent-%COMP%]{display:flex;height:123px;gap:7.74px}.sec-images[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;overflow:hidden}.sec-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;min-height:100%}.features[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:36px;width:100%}.finishing-electric[_ngcontent-%COMP%]{display:flex;width:100%;gap:48px}.finishing[_ngcontent-%COMP%], .electric[_ngcontent-%COMP%]{display:flex;gap:4px;flex-direction:column;align-items:flex-start;align-self:stretch;flex:1}.finishing[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .electric[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .variants[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px;margin:0}.finishing[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .electric[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:500;line-height:28px;margin:0}.variants[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:8px}.variants[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left}.variant-list[_ngcontent-%COMP%]{display:flex;gap:8px}.color-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;overflow:hidden;border:.5px solid black;cursor:pointer}.color-container.active[_ngcontent-%COMP%]{border:2px solid #178C94}.color-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100%;height:100%}.finish-details[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.finis-image[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:50%;border:1px solid black}.finis-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;min-width:100%}@media (max-width: 1300px){.detail-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.detail-content[_ngcontent-%COMP%]{max-width:645px}}@media (max-width: 700px){.img-container[_ngcontent-%COMP%]{width:100%}.main-image[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:1}.sec-img-container[_ngcontent-%COMP%]{width:100%;height:auto}.sec-images[_ngcontent-%COMP%]{width:100%;aspect-ratio:1}.detail-content[_ngcontent-%COMP%]{padding:32px 16px}}@media (max-width: 550px){.detail-content[_ngcontent-%COMP%]{width:100%;min-width:300px}.details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;font-style:normal;font-weight:600;line-height:38px}.details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-style:normal;font-weight:400;line-height:20px}.features[_ngcontent-%COMP%]{flex-direction:column-reverse}.finishing-electric[_ngcontent-%COMP%]{flex-direction:column}.button-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-style:normal;font-weight:600;line-height:28px;flex:1;min-width:100px}.button-bar[_ngcontent-%COMP%]   .button-base[_ngcontent-%COMP%]{padding:8px 14px;flex:auto;width:auto}.button-bar[_ngcontent-%COMP%]   .button-base[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-style:normal;font-weight:600;line-height:20px}}']})};export{R as Singular};
