<div class="cart-container">
    <div class="cart-content">
        <div class="payment-details">
            <h2>Detalles de facturación</h2>
            <form [formGroup]="buyingForm" class="payment-form" (ngSubmit)="onSubmit()">
                <div class="form-pair">
                    <div class="input-container payment">
                        <label class="form-label" >
                            Nombre*
                        </label>
                        <div class="input-content">
                            <input type="text" formControlName="name" placeholder="Introduce tu nombre">
                        </div>
                    </div>
                    <div class="input-container payment">
                        <label class="form-label">
                            Apellido
                        </label>
                        <div class="input-content" >
                            <input type="text" formControlName="lastName" placeholder="Introduce tu nombre">
                        </div>
                    </div>
                </div>

                <div class="form-pair">
                    <div class="input-container payment">
                        <label class="form-label">
                            Correo electrónico
                        </label>
                        <div class="input-content">
                            <input type="email" placeholder="olivia@gmail.com" formControlName="email">
                        </div>
                    </div>
                    <div class="input-container payment">
                        <label class="form-label">
                            Teléfono
                        </label>
                        <div class="input-content">
                            <input type="number" placeholder="+53 000-0000" formControlName="phone">
                        </div>
                    </div>
                </div>
                <div class="checkbox-container">
                    <input type="checkbox" id="shipping" >
                    <div>
                        <label for="shipping">Envío a domicilio</label>
                        <p>El envío solo está disponible para la provincia de La Habana.</p>
                    </div>
                </div>
                <div class="submit-container">
                    <p>Para adquirir <mark>nuestros productos</mark>, solo debe completar el <mark>formulario de
                            solicitud</mark>. Una vez
                        recibido el pedido, lo contactaremos a través de <mark>Whatsapp</mark> para ajustar os detalles
                        del <mark> método de
                            pago</mark> y le enviaremos un <mark>correo electrónico</mark> con la <mark>factura</mark>
                        correspondiente.
                        <br />
                        <br />
                        Su solicitud será procesada una vez confirmado el pago.
                    </p>
                    <button type="submit" class="button-base"><label>SOLICITAR PEDIDO</label></button>
                </div>
            </form>
        </div>
        <div class="order-summary">
            <h2>Mi cesta ({{cartService.currentProducts.length}} productos)</h2>
            <div class="summary-content">
                @for (item of cartService.currentProducts; track $index) {
                <div class="summary-item" [ngClass]="{'selected': isActive($index)}">
                    <div class="checkbox-circle" (click)="toggle($index)">
                        <input type="checkbox" [checked]="isActive($index)" (change)="toggle($index)" />
                        <span></span>
                    </div>
                    <div class="info-prod">
                        <div class="img" (click)="toggle($index)">
                            <img [src]="item.variants.length > 0? item.variants[0].image: ''" />
                        </div>
                        <div class="prod-txt" (click)="toggle($index)">
                            <h3>{{item.name}}</h3>
                            <h4 class="desc">{{item.subtitle}}</h4>
                            <p>{{(item.variants.length > 0 ? item.variants[0].price: '')|currency}}</p>
                        </div>
                        <div class="count">
                            <button (click)="minus($index)">
                                <img src="/assets/minus.svg" alt="">
                            </button>
                            <span class="prod-count">{{selected[$index] || 0}}</span>
                            <button (click)="plus($index)">
                                <img src="/assets/plus.svg" alt="">
                            </button>
                        </div>
                    </div>

                </div>
                }
            </div>
        </div>
    </div>