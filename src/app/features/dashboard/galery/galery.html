<div class="galery-container" style="view-transition-name: galery; background-color: white;">
    <header class="galery-header">
        <h2>Galler√≠a</h2>
        <h3>Nuestras luminarias</h3>
    </header>
    <div class="category-nav">
        <button class="button-chips cat" [ngClass]="{'active': selectedCategory == 'TODAS'}"
            (click)="onCategoryChange('TODAS')">
            <label>TODAS</label>
        </button>
        <button class="button-chips cat" [ngClass]="{'active': selectedCategory == categories.tableLumin}"
            (click)="onCategoryChange(categories.tableLumin)">
            <label>LUMINARIAS DE MESA</label>
        </button>
        <button class="button-chips cat" [ngClass]="{'active': selectedCategory == categories.wallLumin}"
            (click)="onCategoryChange(categories.wallLumin)">
            <label>LUMINARIAS DE PARED</label>
        </button>
        <button class="button-chips cat" [ngClass]="{'active': selectedCategory == categories.footLumin}"
            (click)="onCategoryChange(categories.footLumin)">
            <label>LUMINARIAS DE PIE</label>
        </button>
        <button class="button-chips cat" [ngClass]="{'active': selectedCategory == categories.roofLumin}"
            (click)="onCategoryChange(categories.roofLumin)">
            <label>LUMINARIAS DE TECHO</label>
        </button>
        <button class="button-chips cat" [ngClass]="{'active': selectedCategory == categories.lightBulb}"
            (click)="onCategoryChange(categories.lightBulb)">
            <label>BOMBILLO</label>
        </button>
    </div>
    <div class="galery-content">
        @for (product of products; track $index) {
        @defer(on viewport){
        <div [class]="'product pos-' + ($index%9)" [ngClass]="{'small': products.length == 8}"
            (click)="navigateToProduct(product.category.nombre, product.id)" @fadeAndSlideIn>
            <img [src]="product.variants[0].image" alt="{{ product.name }}">
            <div class="product-info"
                [ngClass]="{'t1': $index % 9 in [2,3,4,5,6,7,9] || $index == 7 && products.length ==8} ">
                <h3>{{product.name}}</h3>
                <p>{{product.subtitle}}</p>
            </div>
        </div>
        }@placeholder {
            <div></div>
        }
        }
    </div>
    <div class="pagination">
        <div class="move prev" (click)="onPageChange(currentPage !== 1 ? currentPage - 1: 1 )">
            <img src="/assets/arrow-left.svg" alt="">
            <label>Anterior</label>
        </div>
        <div class="pages">

            @for (page of pagesArray; track $index) {
            @if (page === pages && currentPage-pages > 2 ) {
            <div class="page">
                <label>...</label>
            </div>
            }
            <div class="page" [ngClass]="{'active': currentPage == page}" (click)="onPageChange(page)">
                <label>{{page}}</label>
            </div>
            @if(currentPage > 3 && page+2 == currentPage){
            <div class="page">
                <label>...</label>
            </div>
            }
            }
        </div>
        <div class="move next" (click)="onPageChange(currentPage !== pages ? currentPage + 1: pages )">
            <label>Sigiente</label>
            <img src="/assets/arrow-right.svg" alt="">
        </div>
    </div>
</div>